-- Generated by ts-morph script. Do not edit manually!

---@param func function
---@return function
local function safe_operation(func)
	return function()
		local success, err = pcall(func)
		if not success then
			reaper.ShowConsoleMsg("Error: " .. tostring(err) .. "\n")
		end
	end
end

local Globals = require "globals"
local ListProjects = require "operations/list_projects"
local OpenProject = require "operations/open_project"
local TestActionId = require "operations/test_action_id"
local GetProjectLength = require "operations/get_project_length"


local Operations = {
	["listProjects"] = safe_operation(function()
		local projects = ListProjects()

		if not projects or projects == '' then
			error("Operation projects failed to return required output: projects")
		end

		reaper.SetExtState(Globals.SECTION, "projects", projects, true)
	end),

	["openProject"] = safe_operation(function()
		local projectPath = reaper.GetExtState(Globals.SECTION, "projectPath")
		if not projectPath or projectPath == "" then
			error("Missing required parameter: projectPath")
		end

		OpenProject(projectPath)

		reaper.DeleteExtState(Globals.SECTION, "projectPath", true)
	end),

	["testActionId"] = safe_operation(function()
		local testNonce = reaper.GetExtState(Globals.SECTION, "testNonce")
		if not testNonce or testNonce == "" then
			error("Missing required parameter: testNonce")
		end

		local testOutput = TestActionId(testNonce)

		if not testOutput or testOutput == '' then
			error("Operation testOutput failed to return required output: testOutput")
		end

		reaper.SetExtState(Globals.SECTION, "testOutput", testOutput, true)
		reaper.DeleteExtState(Globals.SECTION, "testNonce", true)
	end),

	["getProjectLength"] = safe_operation(function()
		local projectLength = GetProjectLength()

		if not projectLength or projectLength == '' then
			error("Operation projectLength failed to return required output: projectLength")
		end

		reaper.SetExtState(Globals.SECTION, "projectLength", tostring(projectLength), true)
	end),
}

return Operations
