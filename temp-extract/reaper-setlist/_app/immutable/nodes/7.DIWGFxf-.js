import{k as N,c as it,e as at,l as st,a as Q,g as ct,B as U,m as vt,n as C,r as dt}from"../chunks/R0BlLbBX.js";import{f as p,s as E,a as r,t as K,b as X}from"../chunks/CS4_VdcA.js";import{c as f,r as v,s as k,t as O,l as s,p as ut,q as H,k as rt,v as ft,a as pt,f as M,o as m,m as ht,n as V}from"../chunks/Sw90J2G4.js";import{p as ot,i as J,r as Y}from"../chunks/Czi9triy.js";import{a as gt}from"../chunks/w1VlGPSs.js";import{F as mt}from"../chunks/B3I9VG8g.js";import{S as _t}from"../chunks/VTpBikbh.js";const bt=async({fetch:h})=>{try{return await N.ensureInitialized(h),{folderPath:N.folderPath||"",scriptActionId:N.scriptActionId||""}}catch(a){return{folderPath:"",scriptActionId:"",error:a instanceof Error?a.message:"An unknown error occurred."}}},Jt=Object.freeze(Object.defineProperty({__proto__:null,load:bt},Symbol.toStringTag,{value:"Module"}));var kt=p('<a class="svelte-kzvegf"> </a>'),yt=p('<li class="svelte-kzvegf"><!></li>'),xt=p('<ol class="svelte-kzvegf"></ol>'),wt=p('<a class="svelte-kzvegf"> </a>'),St=p('<li class="svelte-kzvegf"><!></li>'),$t=p('<ul class="svelte-kzvegf"></ul>'),It=p('<div><h2 class="svelte-kzvegf"> </h2> <!></div>');function nt(h,a){let i=ot(a,"variant",3,"default"),c=ot(a,"listType",3,"unordered");const d={default:"instruction-box--default",success:"instruction-box--success",info:"instruction-box--info",help:"instruction-box--help"};var y=It(),A=f(y),W=f(A,!0);v(A);var q=k(A,2);{var G=S=>{var x=xt();at(x,21,()=>a.steps,g=>g.label,(g,u)=>{var w=yt(),z=f(w);{var T=n=>{var o=kt(),R=f(o,!0);v(o),O(()=>{st(o,"href",`#${s(u).href}`),E(R,s(u).label)}),r(n,o)},P=n=>{var o=K();O(()=>E(o,s(u).label)),r(n,o)};J(z,n=>{s(u).href?n(T):n(P,!1)})}v(w),r(g,w)}),v(x),r(S,x)},B=S=>{var x=$t();at(x,21,()=>a.steps,g=>g.label,(g,u)=>{var w=St(),z=f(w);{var T=n=>{var o=wt(),R=f(o,!0);v(o),O(()=>{st(o,"href",`#${s(u).href}`),E(R,s(u).label)}),r(n,o)},P=n=>{var o=K();O(()=>E(o,s(u).label)),r(n,o)};J(z,n=>{s(u).href?n(T):n(P,!1)})}v(w),r(g,w)}),v(x),r(S,x)};J(q,S=>{c()==="ordered"?S(G):S(B,!1)})}v(y),O(()=>{it(y,1,`instruction-box ${d[i()]??""}`,"svelte-kzvegf"),E(W,a.title)}),r(h,y)}var Dt=X('<svg><path fill="currentColor" d="m23 12l-4-4v3h-9v2h9v3M1 18V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3h-2V6H3v12h12v-3h2v3a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2"></path></svg>');function Tt(h,a){const i=Y(a,["$$slots","$$events","$$legacy"]);var c=Dt();Q(c,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...i})),r(h,c)}var At=X('<svg><path fill="currentColor" d="m14 12l-4-4v3H2v2h8v3m10 2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3h2V6h12v12H6v-3H4v3a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2"></path></svg>');function Pt(h,a){const i=Y(a,["$$slots","$$events","$$legacy"]);var c=At();Q(c,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...i})),r(h,c)}var Rt=X('<svg><path fill="currentColor" d="M17.65 6.35A7.96 7.96 0 0 0 12 4a8 8 0 0 0-8 8a8 8 0 0 0 8 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18a6 6 0 0 1-6-6a6 6 0 0 1 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"></path></svg>');function zt(h,a){const i=Y(a,["$$slots","$$events","$$legacy"]);var c=Rt();Q(c,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...i})),r(h,c)}var jt=p("<!> Refresh Status",1),Ct=p('<div class="form-group"><label for="backing-tracks-folder">Backing Tracks Root Folder:</label> <input type="text" id="backing-tracks-folder" name="backing-tracks-folder" placeholder="e.g., /path/to/your/backing/tracks"/></div> <div class="submit-section"><!></div>',1),Et=p("<!> Export Data",1),Ot=p("<!> Import Data",1),Bt=p('<div class="content svelte-1wi15ku"><h1>Setup</h1> <!> <div class="script-status svelte-1wi15ku"><!> <!></div> <!> <div class="import-export svelte-1wi15ku"><h3>Data Management</h3> <div class="import-export-buttons svelte-1wi15ku"><!> <!></div></div></div>');function Wt(h,a){ut(a,!0);const i=ct();let c=H(rt(a.data.folderPath)),d=H(rt(a.data.scriptActionId&&a.data.scriptActionId.trim()!==""?"completed":"pending")),y=H(!1),A=H(!1);const W=[{label:"Add your songs",href:"/song"},{label:"Create setlists",href:"/"}],q=[{label:'Open Reaper and go to "Actions" > "Show Action List".'},{label:'Search for "ReaScript: Run Script" (the one with command ID 41060) '},{label:'Locate the script you downloaded and click "Load" to install it into Reaper.'},{label:"The script will automatically register itself. Use the refresh button below to check installation status."},{label:"Enter the root folder path where your backing tracks are stored in the form below."},{label:'Click "Save" to store these settings.'}];ft(()=>{!s(A)&&s(d)!=="completed"&&(m(A,!0),B())});async function G(t){t.preventDefault();const e=new FormData(t.target).get("backing-tracks-folder")||"";try{await N.updateFolderPath(e),C.success("Settings saved successfully!"),m(c,e,!0)}catch(l){C.error(`Failed to save settings: ${l.message}`);return}}async function B(){if(!s(y)){m(y,!0),m(d,"running");try{const t=await i.scriptSettings.getScriptActionId();if(t&&t.trim()!==""){const _=vt();await i.script.testActionId(_)===`Test action ID received: ${t}`?m(d,"completed"):m(d,"error"),m(d,"completed")}else m(d,"error")}catch(t){console.error("Error checking script installation:",t),m(d,"error")}finally{m(y,!1)}}}async function S(){const t=await i.songs.list(),_=await i.sets.list(),l=JSON.stringify({songs:t,sets:_},null,2),$=new Blob([l],{type:"application/json"}),I=URL.createObjectURL($),b=document.createElement("a");b.href=I,b.download="reaper-setlist-data.json",document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(I),C.success("Data exported successfully!")}async function x(){const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=async _=>{const e=_.target;if(e.files&&e.files.length>0){const l=e.files[0];try{const $=await l.text(),I=JSON.parse($),b=new Map;for(const D of Object.values(I.songs)){const{id:L,...j}=D,F=await i.songs.add(j);b.set(L,F.id)}for(const D of Object.values(I.sets)){const{...L}=D,j={...L,songs:D.songs.map(F=>b.get(F)||F)};await i.sets.add(j)}C.success("Data imported successfully!")}catch($){C.error(`Failed to import data: ${$.message}`)}}},t.click()}var g=Bt(),u=k(f(g),2);{var w=t=>{nt(t,{title:"Script Installation",get steps(){return q},variant:"help",listType:"ordered"})},z=t=>{nt(t,{title:"Next steps:",get steps(){return W},variant:"success",listType:"unordered"})};J(u,t=>{s(d)==="error"?t(w):t(z,!1)})}var T=k(u,2),P=f(T);const n=ht(()=>s(d)==="completed"?"Script is installed and ready to use":s(d)==="running"?"Checking installation status...":"Script not detected. Please install the script in Reaper and refresh.");_t(P,{title:"Script Installation Status",get description(){return s(n)},get status(){return s(d)}});var o=k(P,2);U(o,{elementType:"button",onclick:B,get disabled(){return s(y)},variant:"text",children:(t,_)=>{var e=jt(),l=M(e);zt(l,{}),V(),r(t,e)},$$slots:{default:!0}}),v(T);var R=k(T,2);mt(R,{onsubmit:G,children:(t,_)=>{var e=Ct(),l=M(e),$=k(f(l),2);dt($),v(l);var I=k(l,2),b=f(I);U(b,{elementType:"submit",color:"success",children:(D,L)=>{V();var j=K("Save");r(D,j)},$$slots:{default:!0}}),v(I),gt($,()=>s(c),D=>m(c,D)),r(t,e)},$$slots:{default:!0}});var Z=k(R,2),tt=k(f(Z),2),et=f(tt);U(et,{elementType:"button",onclick:S,variant:"text",children:(t,_)=>{var e=Et(),l=M(e);Tt(l,{}),V(),r(t,e)},$$slots:{default:!0}});var lt=k(et,2);U(lt,{elementType:"button",onclick:x,variant:"text",children:(t,_)=>{var e=Ot(),l=M(e);Pt(l,{}),V(),r(t,e)},$$slots:{default:!0}}),v(tt),v(Z),v(g),r(h,g),pt()}export{Wt as component,Jt as universal};
