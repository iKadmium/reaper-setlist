import{d as ae,f as H,t as S,a as m,s as G}from"./CS4_VdcA.js";import{p as se,k as ne,a as re,f as oe,s as n,c as r,l,t as M,r as o,m as h,n as _,o as ie,q as le}from"./Sw90J2G4.js";import{g as ce,e as de,B as k,b as ue,n as D,r as q}from"./DEwjhFFf.js";import{b as ve,a as A}from"./w1VlGPSs.js";import{F as pe}from"./DSm2LgBt.js";var me=(f,i)=>i(f.currentTarget.value),he=H("<option> </option>"),_e=H('<div class="form-group"><label for="relative-path">Project File:</label> <div class="input-with-select"><select id="relative-path" required><option>Select project...</option><!></select> <!></div> <div class="checkbox-container svelte-mj9djs"><label class="checkbox-label svelte-mj9djs"><input type="checkbox" class="svelte-mj9djs"/> Hide projects already used by other songs</label></div></div> <div class="form-group"><label for="song-name">Song Name:</label> <input type="text" id="song-name" placeholder="Enter song name" required/></div> <div class="form-group"><label for="duration">Duration (seconds):</label> <div class="input-with-button"><input type="number" id="duration" placeholder="Duration in seconds" min="0" required/> <!></div> <span class="duration-display svelte-mj9djs"> </span></div> <div class="submit-section"><!></div>',1);function ye(f,i){se(i,!0);const w=ce(),e=ne({...i.song}),N=h(()=>W(e.length));let g=le(!0);const O=h(()=>Object.values(i.songs).filter(a=>a.id!==e.id).map(a=>a.path)),U=h(()=>l(g)?i.projects.filter(a=>!l(O).includes(a)):i.projects);function W(a){const d=Math.floor(a/60),u=a%60;return`${d}:${u.toString().padStart(2,"0")}`}function z(a){e.path=a;const d=a.split(/[/\\]/),v=d[d.length-1].replace(/\.[^/.]+$/,"");e.name=v}async function I(){e.length=Math.ceil(await w.script.getProjectLength()),D.success("Duration retrieved from Reaper!")}async function J(){try{await w.script.openProject(e.path),D.success(`${e.name} loaded in Reaper!`)}catch(a){D.error(`Failed to load song in Reaper: ${a.message}`)}}pe(f,{onsubmit:()=>i.onSubmit(e),children:(a,d)=>{var u=_e(),v=oe(u),b=n(r(v),2),p=r(b);p.__change=[me,z];var j=r(p);j.value=j.__value="";var K=n(j);de(K,16,()=>l(U),t=>t,(t,c)=>{var s=he(),C={},te=r(s,!0);o(s),M(()=>{C!==(C=c)&&(s.value=(s.__value=c)??""),G(te,c)}),m(t,s)}),o(p);var Q=n(p,2);const V=h(()=>e.name===""||e.path==="");k(Q,{elementType:"button",onclick:J,get disabled(){return l(V)},children:(t,c)=>{_();var s=S("Load");m(t,s)},$$slots:{default:!0}}),o(b);var F=n(b,2),R=r(F),T=r(R);q(T),_(),o(R),o(F),o(v);var x=n(v,2),E=n(r(x),2);q(E),o(x);var y=n(x,2),$=n(r(y),2),P=r($);q(P);var X=n(P,2);k(X,{elementType:"button",onclick:I,children:(t,c)=>{_();var s=S("Get from Reaper");m(t,s)},$$slots:{default:!0}}),o($);var L=n($,2),Y=r(L,!0);o(L),o(y);var B=n(y,2),Z=r(B);const ee=h(()=>e.name===""||e.path==="");k(Z,{elementType:"submit",get disabled(){return l(ee)},children:(t,c)=>{_();var s=S("Save");m(t,s)},$$slots:{default:!0}}),o(B),M(()=>G(Y,l(N))),ue(p,()=>e.path,t=>e.path=t),ve(T,()=>l(g),t=>ie(g,t)),A(E,()=>e.name,t=>e.name=t),A(P,()=>e.length,t=>e.length=t),m(a,u)},$$slots:{default:!0}}),re()}ae(["change"]);export{ye as S};
