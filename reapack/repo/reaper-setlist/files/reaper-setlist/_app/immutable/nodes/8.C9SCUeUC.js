import{g as C,B as f,f as q,n as v}from"../chunks/R0BlLbBX.js";import{f as y,a as i,t as H,s as A}from"../chunks/CS4_VdcA.js";import{p as J,k as K,s as g,f as k,a as N,c,n as Q,r as l,t as D,x as R,l as F,m as T}from"../chunks/Sw90J2G4.js";import{i as U}from"../chunks/Czi9triy.js";import{I as V,R as W,P as X}from"../chunks/Dgt82f7Z.js";import{D as Y}from"../chunks/2bHrKCxW.js";import{P as Z}from"../chunks/CATmRVNY.js";const ee=async({fetch:_})=>{try{return{songs:await C(_).songs.list()}}catch(s){return{songs:{},error:s instanceof Error?s.message:"An unknown error occurred."}}},me=Object.freeze(Object.defineProperty({__proto__:null,load:ee},Symbol.toStringTag,{value:"Module"}));var te=y('<p style="color: red;"> </p>'),se=y('<div class="song-info svelte-sjawj0"><span class="song-name svelte-sjawj0"> </span> <span class="song-duration svelte-sjawj0"> </span></div>'),re=y("<!> <!>",1),ae=y('<meta:head><title>Songs - Reaper Setlist</title></meta:head> <h1>Songs</h1> <!> <div class="action-section"><!></div>',1);function fe(_,s){J(s,!0);let h=K(s.data.songs);const d=C(),j=s.data.error;async function O(e){try{await d.reaper.newTab(),await d.script.openProject(e.path),v.success(`${e.name} loaded successfully in Reaper!`)}catch(t){console.error("Error loading song in Reaper:",t),v.error("Failed to communicate with Reaper")}}async function B(e){if(confirm("Are you sure you want to delete this song?"))try{await d.songs.delete(e.id),delete h[e.id],d.sets.deleteSongFromSets(e.id),v.success("Song deleted successfully")}catch(t){v.error(`Failed to delete song: ${t.message}`);return}}function E(e,t){return e.name.localeCompare(t.name)}var P=ae(),S=g(k(P),4);{var I=e=>{var t=te(),p=c(t,!0);l(t),D(()=>A(p,j)),i(e,t)},M=e=>{const t=T(()=>Object.values(h).toSorted(E));V(e,{get items(){return F(t)},nameDisplay:($,a=R)=>{var u=se(),m=c(u),o=c(m,!0);l(m);var r=g(m,2),n=c(r,!0);l(r),l(u),D(x=>{A(o,a().name),A(n,x)},[()=>q(a().length)]),i($,u)},actions:($,a=R)=>{W($,{primaryAction:o=>{f(o,{color:"primary",onclick:()=>O(a()),variant:"icon",children:(r,n)=>{Z(r,{})},$$slots:{default:!0}})},secondaryActions:o=>{var r=re(),n=k(r);const x=T(()=>`#/song/${a().id}/edit`);f(n,{elementType:"a",color:"edit",get href(){return F(x)},variant:"icon",children:(w,L)=>{X(w,{})},$$slots:{default:!0}});var G=g(n,2);f(G,{color:"delete",onclick:()=>B(a()),variant:"icon",children:(w,L)=>{Y(w,{})},$$slots:{default:!0}}),i(o,r)},$$slots:{primaryAction:!0,secondaryActions:!0}})},$$slots:{nameDisplay:!0,actions:!0}})};U(S,e=>{j?e(I):e(M,!1)})}var b=g(S,2),z=c(b);f(z,{elementType:"a",href:"#/song/add",color:"success",children:(e,t)=>{Q();var p=H("Add Song");i(e,p)},$$slots:{default:!0}}),l(b),i(_,P),N()}export{fe as component,me as universal};
