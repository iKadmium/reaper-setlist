import{g as E,B as _,f as Q,n as h}from"../chunks/_ZxBKxY3.js";import{f as n,a,s as w,t as U}from"../chunks/Du2ossJl.js";import{p as V,k as D,s as j,f as R,a as W,c as l,r as d,t as F,x as T,l as C,m as O,n as X}from"../chunks/Cl0Xhb8i.js";import{i as B}from"../chunks/D9aH2qsm.js";import{I as Y,R as Z,P as ee}from"../chunks/CJ-BsevV.js";import{D as te}from"../chunks/B0UuToe8.js";import{P as re}from"../chunks/BBpWFnfa.js";const se=async({fetch:$})=>{try{const r=E($),[p,u]=await Promise.all([r.songs.list(),r.script.listProjects()]);return{songs:p,projects:u}}catch(r){return{songs:{},error:r instanceof Error?r.message:"An unknown error occurred."}}},ye=Object.freeze(Object.defineProperty({__proto__:null,load:se},Symbol.toStringTag,{value:"Module"}));var oe=n('<p style="color: red;"> </p>'),ae=n('<div class="song-info svelte-sjawj0"><span class="song-name svelte-sjawj0"> </span> <span class="song-duration svelte-sjawj0"> </span></div>'),ne=n("<!> <!>",1),ie=n('<div class="action-section"><!></div>'),ce=n('<p style="color: var(--text-muted);">No Reaper projects found. Please double-check your backing tracks folder in Settings.</p>'),le=n("<meta:head><title>Songs - Reaper Setlist</title></meta:head> <h1>Songs</h1> <!> <!>",1);function _e($,r){V(r,!0);let p=D(r.data.songs),u=D(r.data.projects);const m=E(),A=r.data.error;async function I(e){try{await m.reaper.newTab(),await m.script.openProject(e.path),h.success(`${e.name} loaded successfully in Reaper!`)}catch(t){console.error("Error loading song in Reaper:",t),h.error("Failed to communicate with Reaper")}}async function M(e){if(confirm("Are you sure you want to delete this song?"))try{await m.songs.delete(e.id),delete p[e.id],m.sets.deleteSongFromSets(e.id),h.success("Song deleted successfully")}catch(t){h.error(`Failed to delete song: ${t.message}`);return}}function z(e,t){return e.name.localeCompare(t.name)}var S=le(),k=j(R(S),4);{var G=e=>{var t=oe(),v=l(t,!0);d(t),F(()=>w(v,A)),a(e,t)},L=e=>{const t=O(()=>Object.values(p).toSorted(z));Y(e,{get items(){return C(t)},nameDisplay:(f,s=T)=>{var g=ae(),y=l(g),i=l(y,!0);d(y);var o=j(y,2),c=l(o,!0);d(o),d(g),F(x=>{w(i,s().name),w(c,x)},[()=>Q(s().length)]),a(f,g)},actions:(f,s=T)=>{Z(f,{primaryAction:i=>{_(i,{color:"primary",onclick:()=>I(s()),variant:"icon",children:(o,c)=>{re(o,{})},$$slots:{default:!0}})},secondaryActions:i=>{var o=ne(),c=R(o);const x=O(()=>`#/song/${s().id}/edit`);_(c,{elementType:"a",color:"edit",get href(){return C(x)},variant:"icon",children:(P,K)=>{ee(P,{})},$$slots:{default:!0}});var J=j(c,2);_(J,{color:"delete",onclick:()=>M(s()),variant:"icon",children:(P,K)=>{te(P,{})},$$slots:{default:!0}}),a(i,o)},$$slots:{primaryAction:!0,secondaryActions:!0}})},$$slots:{nameDisplay:!0,actions:!0}})};B(k,e=>{A?e(G):e(L,!1)})}var N=j(k,2);{var q=e=>{var t=ie(),v=l(t);_(v,{elementType:"a",href:"#/song/add",color:"success",children:(b,f)=>{X();var s=U("Add Song");a(b,s)},$$slots:{default:!0}}),d(t),a(e,t)},H=e=>{var t=ce();a(e,t)};B(N,e=>{u&&u.length>0?e(q):e(H,!1)})}a($,S),W()}export{_e as component,ye as universal};
