import{k as N,c as nt,e as at,l as st,a as Q,g as ct,B as U,m as dt,n as C,r as vt}from"../chunks/R0BlLbBX.js";import{f as p,s as E,a as o,t as K,b as X}from"../chunks/CS4_VdcA.js";import{c as f,r as d,s as x,t as O,l as r,p as ut,q as V,k as rt,v as ft,a as pt,f as H,o as b,m as ht,n as M}from"../chunks/Sw90J2G4.js";import{p as ot,i as J,r as Y}from"../chunks/Czi9triy.js";import{a as gt}from"../chunks/w1VlGPSs.js";import{F as mt}from"../chunks/B3I9VG8g.js";import{S as bt}from"../chunks/VTpBikbh.js";const _t=async({fetch:h})=>{try{return await N.ensureInitialized(h),{folderPath:N.folderPath||"",scriptActionId:N.scriptActionId||""}}catch(e){return{folderPath:"",scriptActionId:"",error:e instanceof Error?e.message:"An unknown error occurred."}}},Jt=Object.freeze(Object.defineProperty({__proto__:null,load:_t},Symbol.toStringTag,{value:"Module"}));var kt=p('<a class="svelte-kzvegf"> </a>'),yt=p('<li class="svelte-kzvegf"><!></li>'),xt=p('<ol class="svelte-kzvegf"></ol>'),wt=p('<a class="svelte-kzvegf"> </a>'),St=p('<li class="svelte-kzvegf"><!></li>'),$t=p('<ul class="svelte-kzvegf"></ul>'),It=p('<div><h2 class="svelte-kzvegf"> </h2> <!></div>');function lt(h,e){let n=ot(e,"variant",3,"default"),c=ot(e,"listType",3,"unordered");const v={default:"instruction-box--default",success:"instruction-box--success",info:"instruction-box--info",help:"instruction-box--help"};var w=It(),D=f(w),W=f(D,!0);d(D);var q=x(D,2);{var G=I=>{var S=xt();at(S,21,()=>e.steps,g=>g.label,(g,u)=>{var $=yt(),z=f($);{var A=i=>{var l=kt(),R=f(l,!0);d(l),O(()=>{st(l,"href",`#${r(u).href}`),E(R,r(u).label)}),o(i,l)},T=i=>{var l=K();O(()=>E(l,r(u).label)),o(i,l)};J(z,i=>{r(u).href?i(A):i(T,!1)})}d($),o(g,$)}),d(S),o(I,S)},B=I=>{var S=$t();at(S,21,()=>e.steps,g=>g.label,(g,u)=>{var $=St(),z=f($);{var A=i=>{var l=wt(),R=f(l,!0);d(l),O(()=>{st(l,"href",`#${r(u).href}`),E(R,r(u).label)}),o(i,l)},T=i=>{var l=K();O(()=>E(l,r(u).label)),o(i,l)};J(z,i=>{r(u).href?i(A):i(T,!1)})}d($),o(g,$)}),d(S),o(I,S)};J(q,I=>{c()==="ordered"?I(G):I(B,!1)})}d(w),O(()=>{nt(w,1,`instruction-box ${v[n()]??""}`,"svelte-kzvegf"),E(W,e.title)}),o(h,w)}var Pt=X('<svg><path fill="currentColor" d="m23 12l-4-4v3h-9v2h9v3M1 18V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3h-2V6H3v12h12v-3h2v3a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2"></path></svg>');function At(h,e){const n=Y(e,["$$slots","$$events","$$legacy"]);var c=Pt();Q(c,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n})),o(h,c)}var Dt=X('<svg><path fill="currentColor" d="m14 12l-4-4v3H2v2h8v3m10 2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3h2V6h12v12H6v-3H4v3a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2"></path></svg>');function Tt(h,e){const n=Y(e,["$$slots","$$events","$$legacy"]);var c=Dt();Q(c,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n})),o(h,c)}var Rt=X('<svg><path fill="currentColor" d="M17.65 6.35A7.96 7.96 0 0 0 12 4a8 8 0 0 0-8 8a8 8 0 0 0 8 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18a6 6 0 0 1-6-6a6 6 0 0 1 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"></path></svg>');function zt(h,e){const n=Y(e,["$$slots","$$events","$$legacy"]);var c=Rt();Q(c,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n})),o(h,c)}var jt=p("<!> Refresh Status",1),Ct=p('<div class="form-group"><label for="backing-tracks-folder">Backing Tracks Root Folder:</label> <input type="text" id="backing-tracks-folder" name="backing-tracks-folder" placeholder="e.g., /path/to/your/backing/tracks"/></div> <div class="submit-section"><!></div>',1),Et=p("<!> Export Data",1),Ot=p("<!> Import Data",1),Bt=p('<div class="content svelte-1wi15ku"><h1>Setup</h1> <!> <div class="script-status svelte-1wi15ku"><!> <!></div> <!> <div class="import-export svelte-1wi15ku"><h3>Data Management</h3> <div class="import-export-buttons svelte-1wi15ku"><!> <!></div></div></div>');function Wt(h,e){ut(e,!0);const n=ct();let c=V(rt(e.data.folderPath)),v=V(rt(e.data.scriptActionId&&e.data.scriptActionId.trim()!==""?"completed":"pending")),w=V(!1),D=V(!1);const W=[{label:"Add your songs",href:"/song"},{label:"Create setlists",href:"/"}],q=[{label:'Open Reaper and go to "Actions" > "Show Action List".'},{label:"If you installed this via ReaPack, the reaper-setlist.lua script should already be listed here."},{label:'If not, click "New Action" > "Load ReaScript..." and open the reaper-setlist.lua script.'},{label:"Simply run the script to register it."},{label:"Use the refresh button below to check installation status."},{label:"Enter the root folder path where your backing tracks are stored in the form below."},{label:'Click "Save" to store these settings.'}];ft(()=>{!r(D)&&r(v)!=="completed"&&(b(D,!0),B())});async function G(t){var m;t.preventDefault();let a=(((m=new FormData(t.target).get("backing-tracks-folder"))==null?void 0:m.toString())||"").replaceAll("\\","/");for(;a.includes("//");)a=a.replace("//","/");try{await N.updateFolderPath(a),C.success("Settings saved successfully!"),b(c,a,!0)}catch(k){C.error(`Failed to save settings: ${k.message}`);return}}async function B(){if(!r(w)){b(w,!0),b(v,"running");try{const t=await n.scriptSettings.getScriptActionId();if(t&&t.trim()!==""){const _=dt();await n.script.testActionId(_)===`Test action ID received: ${t}`?b(v,"completed"):b(v,"error"),b(v,"completed")}else b(v,"error")}catch(t){console.error("Error checking script installation:",t),b(v,"error")}finally{b(w,!1)}}}async function I(){const t=await n.songs.list(),_=await n.sets.list(),a=JSON.stringify({songs:t,sets:_},null,2),m=new Blob([a],{type:"application/json"}),k=URL.createObjectURL(m),y=document.createElement("a");y.href=k,y.download="reaper-setlist-data.json",document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(k),C.success("Data exported successfully!")}async function S(){const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=async _=>{const s=_.target;if(s.files&&s.files.length>0){const a=s.files[0];try{const m=await a.text(),k=JSON.parse(m),y=new Map;for(const P of Object.values(k.songs)){const{id:F,...j}=P,L=await n.songs.add(j);y.set(F,L.id)}for(const P of Object.values(k.sets)){const{...F}=P,j={...F,songs:P.songs.map(L=>y.get(L)||L)};await n.sets.add(j)}C.success("Data imported successfully!")}catch(m){C.error(`Failed to import data: ${m.message}`)}}},t.click()}var g=Bt(),u=x(f(g),2);{var $=t=>{lt(t,{title:"Script Installation",get steps(){return q},variant:"help",listType:"ordered"})},z=t=>{lt(t,{title:"Next steps:",get steps(){return W},variant:"success",listType:"unordered"})};J(u,t=>{r(v)==="error"?t($):t(z,!1)})}var A=x(u,2),T=f(A);const i=ht(()=>r(v)==="completed"?"Script is installed and ready to use":r(v)==="running"?"Checking installation status...":"Script not detected. Please install the script in Reaper and refresh.");bt(T,{title:"Script Installation Status",get description(){return r(i)},get status(){return r(v)}});var l=x(T,2);U(l,{elementType:"button",onclick:B,get disabled(){return r(w)},variant:"text",children:(t,_)=>{var s=jt(),a=H(s);zt(a,{}),M(),o(t,s)},$$slots:{default:!0}}),d(A);var R=x(A,2);mt(R,{onsubmit:G,children:(t,_)=>{var s=Ct(),a=H(s),m=x(f(a),2);vt(m),d(a);var k=x(a,2),y=f(k);U(y,{elementType:"submit",color:"success",children:(P,F)=>{M();var j=K("Save");o(P,j)},$$slots:{default:!0}}),d(k),gt(m,()=>r(c),P=>b(c,P)),o(t,s)},$$slots:{default:!0}});var Z=x(R,2),tt=x(f(Z),2),et=f(tt);U(et,{elementType:"button",onclick:I,variant:"text",children:(t,_)=>{var s=Et(),a=H(s);At(a,{}),M(),o(t,s)},$$slots:{default:!0}});var it=x(et,2);U(it,{elementType:"button",onclick:S,variant:"text",children:(t,_)=>{var s=Ot(),a=H(s);Tt(a,{}),M(),o(t,s)},$$slots:{default:!0}}),d(tt),d(Z),d(g),o(h,g),pt()}export{Wt as component,Jt as universal};
