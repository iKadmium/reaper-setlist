import{j as M,c as vt,e as st,k as rt,i as ot,a as Q,g as dt,B as L,l as ut,n as C,r as ft}from"../chunks/BaaqWfM4.js";import{f as p,s as O,a as r,t as K,b as X}from"../chunks/Cyv9BU93.js";import{c as f,r as v,s as b,t as B,l as s,p as pt,q as F,k as nt,v as ht,a as gt,f as U,o as g,m as mt,n as H}from"../chunks/CXoDX78y.js";import{p as it,i as V,r as Y}from"../chunks/CshSjHoe.js";import{a as _t}from"../chunks/DK1uu51e.js";import{F as bt}from"../chunks/4k7lHA7h.js";import{S as kt}from"../chunks/BACbJRNS.js";const yt=async({fetch:h})=>{try{return await M.ensureInitialized(h),{folderPath:M.folderPath||"",scriptActionId:M.scriptActionId||""}}catch(a){return{folderPath:"",scriptActionId:"",error:a instanceof Error?a.message:"An unknown error occurred."}}},qt=Object.freeze(Object.defineProperty({__proto__:null,load:yt},Symbol.toStringTag,{value:"Module"}));var xt=p('<a class="svelte-kzvegf"> </a>'),wt=p('<li class="svelte-kzvegf"><!></li>'),St=p('<ol class="svelte-kzvegf"></ol>'),$t=p('<a class="svelte-kzvegf"> </a>'),It=p('<li class="svelte-kzvegf"><!></li>'),Dt=p('<ul class="svelte-kzvegf"></ul>'),Tt=p('<div><h2 class="svelte-kzvegf"> </h2> <!></div>');function lt(h,a){let l=it(a,"variant",3,"default"),c=it(a,"listType",3,"unordered");const d={default:"instruction-box--default",success:"instruction-box--success",info:"instruction-box--info",help:"instruction-box--help"};var k=Tt(),A=f(k),N=f(A,!0);v(A);var J=b(A,2);{var W=w=>{var y=St();st(y,21,()=>a.steps,ot,(D,u)=>{var x=wt(),j=f(x);{var T=n=>{var o=xt(),R=f(o,!0);v(o),B(()=>{rt(o,"href",`#${s(u).href}`),O(R,s(u).label)}),r(n,o)},P=n=>{var o=K();B(()=>O(o,s(u).label)),r(n,o)};V(j,n=>{s(u).href?n(T):n(P,!1)})}v(x),r(D,x)}),v(y),r(w,y)},E=w=>{var y=Dt();st(y,21,()=>a.steps,ot,(D,u)=>{var x=It(),j=f(x);{var T=n=>{var o=$t(),R=f(o,!0);v(o),B(()=>{rt(o,"href",`#${s(u).href}`),O(R,s(u).label)}),r(n,o)},P=n=>{var o=K();B(()=>O(o,s(u).label)),r(n,o)};V(j,n=>{s(u).href?n(T):n(P,!1)})}v(x),r(D,x)}),v(y),r(w,y)};V(J,w=>{c()==="ordered"?w(W):w(E,!1)})}v(k),B(()=>{vt(k,1,`instruction-box ${d[l()]??""}`,"svelte-kzvegf"),O(N,a.title)}),r(h,k)}var At=X('<svg><path fill="currentColor" d="m23 12l-4-4v3h-9v2h9v3M1 18V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3h-2V6H3v12h12v-3h2v3a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2"></path></svg>');function Pt(h,a){const l=Y(a,["$$slots","$$events","$$legacy"]);var c=At();Q(c,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...l})),r(h,c)}var Rt=X('<svg><path fill="currentColor" d="m14 12l-4-4v3H2v2h8v3m10 2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3h2V6h12v12H6v-3H4v3a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2"></path></svg>');function jt(h,a){const l=Y(a,["$$slots","$$events","$$legacy"]);var c=Rt();Q(c,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...l})),r(h,c)}var zt=X('<svg><path fill="currentColor" d="M17.65 6.35A7.96 7.96 0 0 0 12 4a8 8 0 0 0-8 8a8 8 0 0 0 8 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18a6 6 0 0 1-6-6a6 6 0 0 1 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"></path></svg>');function Ct(h,a){const l=Y(a,["$$slots","$$events","$$legacy"]);var c=zt();Q(c,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...l})),r(h,c)}var Ot=p("<!> Refresh Status",1),Bt=p('<div class="form-group"><label for="backing-tracks-folder">Backing Tracks Root Folder:</label> <input type="text" id="backing-tracks-folder" name="backing-tracks-folder" placeholder="e.g., /path/to/your/backing/tracks"/></div> <div class="submit-section"><!></div>',1),Et=p("<!> Export Data",1),Lt=p("<!> Import Data",1),Ft=p('<div class="content svelte-1wi15ku"><h1>Setup</h1> <!> <div class="script-status svelte-1wi15ku"><!> <!></div> <!> <div class="import-export svelte-1wi15ku"><h3>Data Management</h3> <div class="import-export-buttons svelte-1wi15ku"><!> <!></div></div></div>');function Gt(h,a){pt(a,!0);const l=dt();let c=F(nt(a.data.folderPath)),d=F(nt(a.data.scriptActionId&&a.data.scriptActionId.trim()!==""?"completed":"pending")),k=F(!1),A=F(!1);const N=[{label:"Add your songs",href:"/song"},{label:"Create setlists",href:"/"}],J=[{label:'Open Reaper and go to "Actions" > "Show Action List".'},{label:'Search for "ReaScript: Run Script" (the one with command ID 41060) '},{label:'Locate the script you downloaded and click "Load" to install it into Reaper.'},{label:"The script will automatically register itself. Use the refresh button below to check installation status."},{label:"Enter the root folder path where your backing tracks are stored in the form below."},{label:'Click "Save" to store these settings.'}];ht(()=>{!s(A)&&s(d)!=="completed"&&(g(A,!0),E())});async function W(t){t.preventDefault();const e=new FormData(t.target).get("backing-tracks-folder")||"";try{await M.updateFolderPath(e),C.success("Settings saved successfully!"),g(c,e,!0)}catch(i){C.error(`Failed to save settings: ${i.message}`);return}}async function E(){if(!s(k)){g(k,!0),g(d,"running");try{const t=await l.scriptSettings.getScriptActionId();if(t&&t.trim()!==""){const m=ut();await l.script.testActionId(m)===`Test action ID received: ${t}`?g(d,"completed"):g(d,"error"),g(d,"completed")}else g(d,"error")}catch{g(d,"error")}finally{g(k,!1)}}}async function w(){const t=await l.songs.list(),m=await l.sets.list(),i=JSON.stringify({songs:t,sets:m},null,2),S=new Blob([i],{type:"application/json"}),$=URL.createObjectURL(S),_=document.createElement("a");_.href=$,_.download="reaper-setlist-data.json",document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL($),C.success("Data exported successfully!")}async function y(){const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=async m=>{const e=m.target;if(e.files&&e.files.length>0){const i=e.files[0];try{const S=await i.text(),$=JSON.parse(S),_=new Map;for(const I of Object.values($.songs)){const{id:q,...z}=I,G=await l.songs.add(z);_.set(q,G.id)}for(const I of Object.values($.sets)){const{id:q,...z}=I,G={...z,songs:I.songs.map(at=>_.get(at)||at)};await l.sets.add(G)}C.success("Data imported successfully!")}catch(S){C.error(`Failed to import data: ${S.message}`)}}},t.click()}var D=Ft(),u=b(f(D),2);{var x=t=>{lt(t,{title:"Script Installation",get steps(){return J},variant:"help",listType:"ordered"})},j=t=>{lt(t,{title:"Next steps:",get steps(){return N},variant:"success",listType:"unordered"})};V(u,t=>{s(d)==="error"?t(x):t(j,!1)})}var T=b(u,2),P=f(T);const n=mt(()=>s(d)==="completed"?"Script is installed and ready to use":s(d)==="running"?"Checking installation status...":"Script not detected. Please install the script in Reaper and refresh.");kt(P,{title:"Script Installation Status",get description(){return s(n)},get status(){return s(d)}});var o=b(P,2);L(o,{elementType:"button",onclick:E,get disabled(){return s(k)},variant:"text",children:(t,m)=>{var e=Ot(),i=U(e);Ct(i,{}),H(),r(t,e)},$$slots:{default:!0}}),v(T);var R=b(T,2);bt(R,{onsubmit:W,children:(t,m)=>{var e=Bt(),i=U(e),S=b(f(i),2);ft(S),v(i);var $=b(i,2),_=f($);L(_,{elementType:"submit",color:"success",children:(I,q)=>{H();var z=K("Save");r(I,z)},$$slots:{default:!0}}),v($),_t(S,()=>s(c),I=>g(c,I)),r(t,e)},$$slots:{default:!0}});var Z=b(R,2),tt=b(f(Z),2),et=f(tt);L(et,{elementType:"button",onclick:w,variant:"text",children:(t,m)=>{var e=Et(),i=U(e);Pt(i,{}),H(),r(t,e)},$$slots:{default:!0}});var ct=b(et,2);L(ct,{elementType:"button",onclick:y,variant:"text",children:(t,m)=>{var e=Lt(),i=U(e);jt(i,{}),H(),r(t,e)},$$slots:{default:!0}}),v(tt),v(Z),v(D),r(h,D),gt()}export{Gt as component,qt as universal};
