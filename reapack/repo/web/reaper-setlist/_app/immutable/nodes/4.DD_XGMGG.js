import{g as C,B as f,f as q,n as v}from"../chunks/BaaqWfM4.js";import{f as y,a as i,t as H,s as A}from"../chunks/Cyv9BU93.js";import{p as J,k as K,s as g,f as k,a as N,c,n as Q,r as l,t as D,x as R,l as F,m as T}from"../chunks/CXoDX78y.js";import{i as U}from"../chunks/CshSjHoe.js";import{I as V,R as W,P as X}from"../chunks/BcNsyw2A.js";import{D as Y}from"../chunks/B7veSM1C.js";import{P as Z}from"../chunks/Camoe4SX.js";import"../chunks/D08qE96i.js";const ee=async({fetch:_})=>{try{return{songs:await C(_).songs.list()}}catch(s){return{songs:{},error:s instanceof Error?s.message:"An unknown error occurred."}}},fe=Object.freeze(Object.defineProperty({__proto__:null,load:ee},Symbol.toStringTag,{value:"Module"}));var te=y('<p style="color: red;"> </p>'),se=y('<div class="song-info svelte-sjawj0"><span class="song-name svelte-sjawj0"> </span> <span class="song-duration svelte-sjawj0"> </span></div>'),ae=y("<!> <!>",1),re=y('<meta:head><title>Songs - Reaper Setlist</title></meta:head> <h1>Songs</h1> <!> <div class="action-section"><!></div>',1);function ve(_,s){J(s,!0);let h=K(s.data.songs);const d=C(),j=s.data.error;async function O(e){try{await d.reaper.newTab(),await d.script.openProject(e.path),v.success(`${e.name} loaded successfully in Reaper!`)}catch{v.error("Failed to communicate with Reaper")}}async function B(e){if(confirm("Are you sure you want to delete this song?"))try{await d.songs.delete(e.id),delete h[e.id],d.sets.deleteSongFromSets(e.id),v.success("Song deleted successfully")}catch(t){v.error(`Failed to delete song: ${t.message}`);return}}function I(e,t){return e.name.localeCompare(t.name)}var P=re(),S=g(k(P),4);{var M=e=>{var t=te(),p=c(t,!0);l(t),D(()=>A(p,j)),i(e,t)},z=e=>{const t=T(()=>Object.values(h).toSorted(I));V(e,{get items(){return F(t)},nameDisplay:($,r=R)=>{var u=se(),m=c(u),o=c(m,!0);l(m);var a=g(m,2),n=c(a,!0);l(a),l(u),D(x=>{A(o,r().name),A(n,x)},[()=>q(r().length)]),i($,u)},actions:($,r=R)=>{W($,{primaryAction:o=>{f(o,{color:"primary",onclick:()=>O(r()),variant:"icon",children:(a,n)=>{Z(a,{})},$$slots:{default:!0}})},secondaryActions:o=>{var a=ae(),n=k(a);const x=T(()=>`#/song/${r().id}/edit`);f(n,{elementType:"a",color:"edit",get href(){return F(x)},variant:"icon",children:(w,L)=>{X(w,{})},$$slots:{default:!0}});var G=g(n,2);f(G,{color:"delete",onclick:()=>B(r()),variant:"icon",children:(w,L)=>{Y(w,{})},$$slots:{default:!0}}),i(o,a)},$$slots:{primaryAction:!0,secondaryActions:!0}})},$$slots:{nameDisplay:!0,actions:!0}})};U(S,e=>{j?e(M):e(z,!1)})}var b=g(S,2),E=c(b);f(E,{elementType:"a",href:"#/song/add",color:"success",children:(e,t)=>{Q();var p=H("Add Song");i(e,p)},$$slots:{default:!0}}),l(b),i(_,P),N()}export{ve as component,fe as universal};
