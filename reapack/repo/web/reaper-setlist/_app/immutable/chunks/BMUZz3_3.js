import{d as ae,f as H,t as S,a as m,s as G}from"./Cyv9BU93.js";import{p as se,k as ne,a as re,f as oe,s as n,c as r,l as i,t as M,r as o,m as h,n as _,o as ie,q as le}from"./CXoDX78y.js";import{g as de,e as ce,B as k,b as ue,n as D,i as ve,r as q}from"./BaaqWfM4.js";import{b as pe,a as A}from"./DK1uu51e.js";import{F as me}from"./4k7lHA7h.js";var he=(f,l)=>l(f.currentTarget.value),_e=H("<option> </option>"),fe=H('<div class="form-group"><label for="relative-path">Project File:</label> <div class="input-with-select"><select id="relative-path" required><option>Select project...</option><!></select> <!></div> <div class="checkbox-container svelte-mj9djs"><label class="checkbox-label svelte-mj9djs"><input type="checkbox" class="svelte-mj9djs"/> Hide projects already used by other songs</label></div></div> <div class="form-group"><label for="song-name">Song Name:</label> <input type="text" id="song-name" placeholder="Enter song name" required/></div> <div class="form-group"><label for="duration">Duration (seconds):</label> <div class="input-with-button"><input type="number" id="duration" placeholder="Duration in seconds" min="0" required/> <!></div> <span class="duration-display svelte-mj9djs"> </span></div> <div class="submit-section"><!></div>',1);function $e(f,l){se(l,!0);const w=de(),e=ne({...l.song}),N=h(()=>W(e.length));let g=le(!0);const O=h(()=>Object.values(l.songs).filter(t=>t.id!==e.id).map(t=>t.path)),U=h(()=>i(g)?l.projects.filter(t=>!i(O).includes(t)):l.projects);function W(t){const c=Math.floor(t/60),u=t%60;return`${c}:${u.toString().padStart(2,"0")}`}function z(t){e.path=t;const c=t.split(/[/\\]/),v=c[c.length-1].replace(/\.[^/.]+$/,"");e.name=v}async function I(){e.length=Math.ceil(await w.script.getProjectLength()),D.success("Duration retrieved from Reaper!")}async function J(){try{await w.script.openProject(e.path),D.success(`${e.name} loaded in Reaper!`)}catch(t){D.error(`Failed to load song in Reaper: ${t.message}`)}}me(f,{onsubmit:()=>l.onSubmit(e),children:(t,c)=>{var u=fe(),v=oe(u),b=n(r(v),2),p=r(b);p.__change=[he,z];var x=r(p);x.value=x.__value="";var K=n(x);ce(K,17,()=>i(U),ve,(a,d)=>{var s=_e(),C={},te=r(s,!0);o(s),M(()=>{C!==(C=i(d))&&(s.value=(s.__value=i(d))??""),G(te,i(d))}),m(a,s)}),o(p);var Q=n(p,2);const V=h(()=>e.name===""||e.path==="");k(Q,{elementType:"button",onclick:J,get disabled(){return i(V)},children:(a,d)=>{_();var s=S("Load");m(a,s)},$$slots:{default:!0}}),o(b);var F=n(b,2),R=r(F),T=r(R);q(T),_(),o(R),o(F),o(v);var j=n(v,2),E=n(r(j),2);q(E),o(j);var y=n(j,2),$=n(r(y),2),P=r($);q(P);var X=n(P,2);k(X,{elementType:"button",onclick:I,children:(a,d)=>{_();var s=S("Get from Reaper");m(a,s)},$$slots:{default:!0}}),o($);var L=n($,2),Y=r(L,!0);o(L),o(y);var B=n(y,2),Z=r(B);const ee=h(()=>e.name===""||e.path==="");k(Z,{elementType:"submit",get disabled(){return i(ee)},children:(a,d)=>{_();var s=S("Save");m(a,s)},$$slots:{default:!0}}),o(B),M(()=>G(Y,i(N))),ue(p,()=>e.path,a=>e.path=a),pe(T,()=>i(g),a=>ie(g,a)),A(E,()=>e.name,a=>e.name=a),A(P,()=>e.length,a=>e.length=a),m(t,u)},$$slots:{default:!0}}),re()}ae(["change"]);export{$e as S};
