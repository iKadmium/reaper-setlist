import{b as ye,a as x,d as ce,f as I,e as De,s as Z,t as se}from"./Cyv9BU93.js";import{p as fe,l as a,q as P,o as _,c as l,r as i,a as me,k as re,m as K,f as ke,s as v,t as Q,n as oe}from"./CXoDX78y.js";import{r as ze,i as X,b as Me}from"./CshSjHoe.js";import{a as Te,r as ie,e as ve,B as $,f as le,c as Ee,i as de,h as qe,b as Ie}from"./BaaqWfM4.js";import{a as Oe,t as ue,f as Ce,b as Ve}from"./BaA2rWL-.js";import{a as Pe}from"./DK1uu51e.js";import{F as Ae}from"./4k7lHA7h.js";import{D as Be}from"./B7veSM1C.js";import{o as Le,a as Fe}from"./D5RknIJE.js";function je(n){const e=n-1;return e*e*e+1}function He(n,{from:e,to:t},u={}){var{delay:c=0,duration:z=E=>Math.sqrt(E)*120,easing:w=je}=u,s=getComputedStyle(n),M=s.transform==="none"?"":s.transform,[f,O]=s.transformOrigin.split(" ").map(parseFloat);f/=n.clientWidth,O/=n.clientHeight;var j=Re(n),N=n.clientWidth/t.width/j,U=n.clientHeight/t.height/j,H=e.left+e.width*f,r=e.top+e.height*O,d=t.left+t.width*f,m=t.top+t.height*O,p=(H-d)*N,y=(r-m)*U,T=e.width/t.width,A=e.height/t.height;return{delay:c,duration:typeof z=="function"?z(Math.sqrt(p*p+y*y)):z,easing:w,css:(E,q)=>{var R=q*p,G=q*y,B=E+q*T,W=E+q*A;return`transform: ${M} translate(${R}px, ${G}px) scale(${B}, ${W});`}}}function Re(n){if("currentCSSZoom"in n)return n.currentCSSZoom;for(var e=n,t=1;e!==null;)t*=+getComputedStyle(e).zoom,e=e.parentElement;return t}var We=ye('<svg><path fill="currentColor" d="M7 19v-2h2v2zm4 0v-2h2v2zm4 0v-2h2v2zm-8-4v-2h2v2zm4 0v-2h2v2zm4 0v-2h2v2zm-8-4V9h2v2zm4 0V9h2v2zm4 0V9h2v2zM7 7V5h2v2zm4 0V5h2v2zm4 0V5h2v2z"></path></svg>');function Ye(n,e){const t=ze(e,["$$slots","$$events","$$legacy"]);var u=We();Te(u,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t})),x(n,u)}function Ze(n,e,t){n.preventDefault(),_(e,n.touches[0].clientY,!0),t.onmove(a(e))}function Ne(n,e){n.preventDefault(),e.onstart()}function Ue(n,e,t){n.preventDefault(),e.onend(a(t))}function Ge(n,e,t){n.preventDefault(),_(e,!0),t.onstart()}var Je=I('<div class="drag-container svelte-1iq6vyq"><!></div>');function Ke(n,e){fe(e,!0);let t=P(0),u=P(!1);Le(()=>{window.addEventListener("mousemove",c),window.addEventListener("mouseup",z)}),Fe(()=>{window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",z)});function c(f){a(u)&&(f.preventDefault(),_(t,f.clientY,!0),e.onmove(a(t)))}function z(f){f.preventDefault(),_(u,!1),e.onend(a(t))}function w(f){f.preventDefault(),f.stopPropagation()}var s=Je();s.__touchstart=[Ne,e],s.__touchmove=[Ze,t,e],s.__touchend=[Ue,e,t],s.__mousemove=c,s.__mousedown=[Ge,u,e];var M=l(s);Ye(M,{}),i(s),De("selectstart",s,w),x(n,s),me()}ce(["touchstart","touchmove","touchend","mousemove","mousedown"]);var Qe=({currentTarget:{value:n}},e)=>e.date=n?new Date(n).toISOString():new Date().toISOString(),Xe=I('<div class="drag-target svelte-1x8w3k5"></div>'),$e=I('<div class="item-container"><!> <div><!> <div class="song-info svelte-1x8w3k5"><span class="song-name svelte-1x8w3k5"> </span> <span class="song-duration svelte-1x8w3k5"> </span></div> <!></div></div>'),et=I('<div class="drag-target svelte-1x8w3k5"></div>'),tt=I("<option> </option>"),at=I('<div class="form-group"><label for="new-song">Add Song:</label> <div class="add-song-container input-with-button svelte-1x8w3k5"><select id="new-song" class="svelte-1x8w3k5"></select> <!></div></div>'),nt=I("<p>No songs left to add</p>"),st=I('<div class="form-group"><label for="venue">Venue:</label> <input type="text" id="venue" placeholder="Enter venue name" required/></div> <div class="form-group"><label for="date">Date:</label> <input type="date" id="date" required/></div> <div class="songs-container svelte-1x8w3k5"><h2 class="svelte-1x8w3k5">Songs</h2> <dl class="svelte-1x8w3k5"><dt class="svelte-1x8w3k5">Total time:</dt> <dd class="svelte-1x8w3k5"> </dd></dl> <div class="items svelte-1x8w3k5"><!> <!></div></div> <!> <div class="submit-section"><!></div>',1);function mt(n,e){var H;fe(e,!0);let t=re({...e.setlist}),u=K(()=>Object.values(e.songs).filter(r=>!t.songs.includes(r.id)).toSorted((r,d)=>r.name.localeCompare(d.name))),c=P(re(((H=a(u)[0])==null?void 0:H.id)||null)),z=K(()=>t.songs.reduce((r,d)=>{var m;return r+(((m=e.songs[d])==null?void 0:m.length)??0)||0},0)),w=P(void 0),s=P(void 0),M=P(void 0);function f(){var d;if(!a(c)||!e.songs[a(c)])return;const r=e.songs[a(c)];r&&(t.songs.push(r.id),_(c,((d=a(u)[0])==null?void 0:d.id)||null,!0))}function O(r){const d=r.getBoundingClientRect();return d.top+d.height/2}function j(r,d){if(!a(M))return;const m=Array.from(a(M).querySelectorAll(".list-item")),p=m.reduce((y,T)=>Math.abs(O(T)-r)<Math.abs(O(y)-r)?T:y);r<O(p)?_(s,m.indexOf(p),!0):_(s,m.indexOf(p)+1)}function N(r){_(w,r,!0)}function U(r){if(a(w)!==void 0&&a(s)!==void 0){const d=t.songs.splice(a(w),1)[0],m=a(s)>a(w)?a(s)-1:a(s);t.songs.splice(m,0,d)}_(w,void 0),_(s,void 0)}Ae(n,{onsubmit:()=>e.onSubmit(t),children:(r,d)=>{var m=st(),p=ke(m),y=v(l(p),2);ie(y),i(p);var T=v(p,2),A=v(l(T),2);ie(A),A.__change=[Qe,t],i(T);var E=v(T,2),q=v(l(E),2),R=v(l(q),2),G=l(R,!0);i(R),i(q);var B=v(q,2),W=l(B);ve(W,25,()=>t.songs,de,(o,g,D)=>{var b=$e(),Y=l(b);{var J=h=>{var F=Xe();ue(1,F,()=>Ve,()=>({duration:200})),x(h,F)};X(Y,h=>{a(s)===D&&h(J)})}var k=v(Y,2);let C;var S=l(k);Ke(S,{onmove:h=>j(h),onstart:()=>N(D),onend:h=>U()});var V=v(S,2),L=l(V),we=l(L,!0);i(L);var ae=v(L,2),be=l(ae,!0);i(ae),i(V);var Se=v(V,2);$(Se,{color:"delete",onclick:()=>t.songs.splice(D,1),variant:"icon",children:(h,F)=>{Be(h,{})},$$slots:{default:!0}}),i(k),i(b),Q((h,F)=>{var ne;C=Ee(k,1,"list-item svelte-1x8w3k5",null,C,h),Z(we,(ne=e.songs[a(g)])==null?void 0:ne.name),Z(be,F)},[()=>({dragging:a(w)===D}),()=>{var h;return le(((h=e.songs[a(g)])==null?void 0:h.length)||0)}]),Oe(b,()=>He,()=>({duration:300})),ue(3,b,()=>Ce,()=>({duration:300})),x(o,b)});var ge=v(W,2);{var he=o=>{var g=et();x(o,g)};X(ge,o=>{a(s)===t.songs.length&&o(he)})}i(B),Me(B,o=>_(M,o),()=>a(M)),i(E);var ee=v(E,2);{var _e=o=>{var g=at(),D=v(l(g),2),b=l(D);ve(b,21,()=>a(u),de,(k,C)=>{var S=tt(),V={},L=l(S,!0);i(S),Q(()=>{V!==(V=a(C).id)&&(S.value=(S.__value=a(C).id)??""),Z(L,a(C).name)}),x(k,S)}),i(b);var Y=v(b,2);const J=K(()=>a(c)===null);$(Y,{elementType:"button",onclick:f,get disabled(){return a(J)},children:(k,C)=>{oe();var S=se("Add");x(k,S)},$$slots:{default:!0}}),i(D),i(g),Ie(b,()=>a(c),k=>_(c,k)),x(o,g)},pe=o=>{var g=nt();x(o,g)};X(ee,o=>{a(u).length>0?o(_e):o(pe,!1)})}var te=v(ee,2),xe=l(te);$(xe,{elementType:"submit",children:(o,g)=>{oe();var D=se("Save");x(o,D)},$$slots:{default:!0}}),i(te),Q((o,g)=>{qe(A,o),Z(G,g)},[()=>new Date(t.date).toISOString().split("T")[0],()=>le(a(z))]),Pe(y,()=>t.venue,o=>t.venue=o),x(r,m)},$$slots:{default:!0}}),me()}ce(["change"]);export{mt as S};
